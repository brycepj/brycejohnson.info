<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Bryce Johnson - Frontend engineer in Charlottesville, VA</title>
    <style>
      img { max-height: 300px;}
      #email-text { font-weight: bold; }
      .blur-text { background: gray; color: white; padding: 2px 6px; border-radius: 3px; cursor: pointer; margin-left: 2px; opacity: .6;}
    </style>
  </head>

  <body>
    <h2> Hello, my name is Bryce. I'm the husband of Rachael and dad of Emma.</h2>

    <img src="/bne-min.jpeg" alt="Bryce and Emmy">
    <img src="/rne-min.jpeg" alt="Rachael and Emmy">
    <img src="/hike-min.jpg" alt="Rachael, Bryce and Emmy on a hike">

    <h3> We live on a quiet little farm in Virginia with our cats, Ruby and Steve. </h3>

    <h4> I work as a frontend engineer at <a href='https://about.gitlab.com/'>GitLab</a>. Nearly all of my work happens in the open,
      which you can see <a href='https://gitlab.com/brycepj'>here</a>.</h4>

    <p>The best way to reach me is through email, at <span id='email-text' class='blur-text'>reveal</span></p>

    <script>
      const emailTextElem = document.getElementById('email-text');

      emailTextElem.addEventListener('click', (e) => {
        logOperationTiming('reveal-email-address-timer',
          () => revealEmailAddress(emailTextElem, unobfuscateEmailAddress()));
      });

      function logOperationTiming(timerKey, op) {
        console.time(timerKey);
        op();
        console.timeEnd(timerKey);
      }

      function unobfuscateEmailAddress() {
        return stripObfuscators([
          '^^^^^--&&&&---ZZZZZZe###------##bZZZZZZZZZZZZ0#1###ZZZZZZZ---AAAAAAAAAA---Z',
          'ZZZZZZZZ-------7&&&&4Z&ZZZ$$$$$$$$$$$$ZZZ####ZZZZb8ZZZ-ZZZZ-ZZLLLLLLLLLLZZ' ,
          'ZyZaZ&---&&&pZo-ZZ$$$$$ZZZZZ####ZZZZ-ZZZZ$$$$$$$$$$$QQQQQQQQQQ$$$$-$@$$$$$Z',
          'ZZZZZZ----ZZZZ$$$---$&&&&ZZZZZZZm^^-^^Z####oZc$$$$Z.^Z----q---BBBBBBBBBB^^Z',
        ], getObfuscators()).reverse().join('').split('').reverse().join('');
      }

      function revealEmailAddress(node, emailAddress) {
        node.classList.remove('blur-text');
        node.textContent = emailAddress;
      }

      function getObfuscators() {
        return ['Z', '-', '$', '&', '^', '#', 'Q', 'L', 'A', 'B' ];
      }

      function stripObfuscators(arr, obfuscator) {
        return arr.map((str) => stripChars(str, obfuscator));
      }

      function stripChars(str, obfuscators) {
        return obfuscators.reduce((memo, obfuscator) => {
          return stripChar(memo, obfuscator);
        }, str);
      }

      function stripChar(str, char) {
        let newStr = str;

        while (newStr.indexOf(char) > -1) {
          newStr = newStr.replace(char, '');
        }

        return newStr;
      }
    </script>
  </body>
</html>
